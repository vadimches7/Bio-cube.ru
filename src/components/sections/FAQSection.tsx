import { useServiceMode } from "@/contexts/ServiceModeContext";
import { cn } from "@/lib/utils";
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion";

/**
 * FAQSection - Секция часто задаваемых вопросов
 * 
 * Адаптирована под режим:
 * - installation: вопросы о стоимости, сроках, процессе
 * - service: вопросы о проблемах, диагностике, стоимости услуг
 */

const faqsData = {
  installation: [
    {
      question: "Сколько стоит аквариум под ключ?",
      answer: "Стоимость зависит от размера, типа (пресноводный/морской), оборудования и сложности установки. Пресноводный аквариум от 200 литров — от 150 000 ₽. Морской риф — от 350 000 ₽. Точную стоимость рассчитаем после консультации и осмотра помещения.",
    },
    {
      question: "Как долго запускается аквариум?",
      answer: "Полный цикл от заказа до заселения рыб занимает 4-8 недель. Изготовление — 2-4 недели, установка — 1-3 дня, созревание воды (азотный цикл) — 2-4 недели. Для морских систем срок может быть больше из-за сложности экосистемы.",
    },
    {
      question: "Что входит в установку под ключ?",
      answer: "Всё: проектирование, изготовление аквариума, доставка, установка, подключение оборудования, запуск цикла, заселение обитателей. Также включено обучение по уходу и первые 3 месяца технического обслуживания.",
    },
    {
      question: "Выезжаете ли вы за пределы Москвы?",
      answer: "Да, работаем по всей Московской области и готовы выехать в другие регионы (Санкт-Петербург, Сочи, Казань и др.). Для удалённых объектов обсуждаем логистику индивидуально.",
    },
    {
      question: "Можно ли перевезти существующий аквариум?",
      answer: "Да, выполняем профессиональный переезд аквариумов любого размера. Включает: слив воды, упаковку обитателей, демонтаж, транспортировку, монтаж на новом месте, перезапуск. Стоимость зависит от объёма и расстояния.",
    },
    {
      question: "Какая гарантия на работы?",
      answer: "5 лет гарантии на аквариум и установку. Включает бесплатный ремонт при заводском браке. На оборудование — гарантия производителя (обычно 1-2 года). Также первые 3 месяца бесплатное техническое обслуживание.",
    },
  ],
  service: [
    {
      question: "Сколько стоит вызов специалиста?",
      answer: "Диагностический выезд — от 5 200 ₽. Разовый сервисный визит считается по времени: “выезд + 1-й час” + “каждый следующий час”. Абонемент (еженедельный визит) — от 7 000 ₽/мес. Итоговую стоимость подтверждаем перед началом работ; цены указаны с учётом НДС и не являются публичной офертой (п. 2 ст. 437 ГК РФ).",
    },
    {
      question: "Как быстро вы можете приехать?",
      answer: "Стандартный выезд — в течение 24 часов. При экстренных ситуациях (массовая гибель рыб, протечка) — в течение 4 часов. Работаем без выходных, дежурный специалист всегда на связи.",
    },
    {
      question: "Что делать, если рыбы болеют?",
      answer: "Позвоните нам сразу — не пытайтесь лечить самостоятельно, можно навредить. Мы выезжаем, определяем причину (инфекция, паразиты, отравление), назначаем лечение. При необходимости заберём рыб на карантин в нашу базу.",
    },
    {
      question: "Почему вода стала мутной/зелёной?",
      answer: "Причин много: перекорм, перенаселение, сбой фильтрации, неправильное освещение, избыток питательных веществ. Без тестов воды гадать бессмысленно. Мы приедем, проведём диагностику и устраним причину, а не симптом.",
    },
    {
      question: "Вы обслуживаете пресные и морские аквариумы? В чём разница?",
      answer: "Да, работаем с пресными и морскими системами. В пресных аквариумах часто важен баланс света/корма/фильтрации, а в травниках — ещё и макро/микро, удобрения и CO₂. В морских системах ключевое — стабильность (солёность, температура, элементы, кислород) и корректная работа оборудования, поэтому требования к опыту и регулярному контролю выше.",
    },
    {
      question: "Можете обслуживать регулярно?",
      answer: "Да. Самый “здоровый” режим на практике — еженедельный визит (4 раза в месяц): мягкие подмены без скачков параметров, раннее выявление проблем и стабильный рост растений/состояние моря. В абонементе делаем подмены, чистку, тесты, контроль оборудования и даём сопровождение.",
    },
    {
      question: "Делаете микроскопию для диагностики?",
      answer: "Да, по предварительной договорённости. Микроскопические исследования проводим на нашей территории: не всё безопасно делать на выезде, но иногда это единственный способ точно подтвердить причину проблемы. В заявке просто укажите, что нужна микроскопия.",
    },
    {
      question: "Есть ли скидки и выезды в выходные?",
      answer: "Да. При обслуживании 2 аквариумов по одному адресу — скидка 10%, 3 аквариумов — скидка 15%. Выезды в нерабочие часы и в выходные обсуждаем индивидуально.",
    },
    {
      question: "Гарантия на результат есть?",
      answer: "Да. Если проблема, которую мы устраняли, вернулась в течение месяца — приедем и исправим бесплатно. Это касается водорослей, мути, нестабильных параметров. На лечение рыб гарантия ограничена, т.к. зависит от соблюдения рекомендаций.",
    },
  ],
};

const headerData = {
  installation: {
    title: "Частые",
    titleAccent: "вопросы",
    subtitle: "Ответы на популярные вопросы о проектировании и установке аквариумов",
  },
  service: {
    title: "Частые",
    titleAccent: "вопросы",
    subtitle: "Ответы на вопросы об обслуживании и спасении аквариумов",
  },
};

export function FAQSection() {
  const { mode } = useServiceMode();
  
  const faqs = faqsData[mode];
  const header = headerData[mode];

  return (
    <section id="faq" className="section-padding relative overflow-hidden">
      {/* Background */}
      <div className="absolute inset-0 bg-gradient-dark" />
      <div className={cn(
        "absolute bottom-0 right-1/4 w-96 h-96 rounded-full blur-3xl",
        mode === "installation" ? "bg-bio/5" : "bg-amber/5"
      )} />
      
      <div className="container relative z-10 px-4">
        <div className="max-w-3xl mx-auto text-center mb-12">
          <h2 className="font-serif text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
            {header.title}{" "}
            <span className={mode === "installation" ? "text-gradient-bio" : "text-gradient-amber"}>
              {header.titleAccent}
            </span>
          </h2>
          <p className="text-lg text-muted-foreground">
            {header.subtitle}
          </p>
        </div>
        
        <div className="max-w-3xl mx-auto">
          <Accordion type="single" collapsible className="space-y-4">
            {faqs.map((faq, index) => (
              <AccordionItem 
                key={index} 
                value={`item-${index}`}
                className="card-premium px-6 border-none"
              >
                <AccordionTrigger className={cn(
                  "text-left font-serif text-lg hover:no-underline py-6 transition-colors",
                  mode === "installation" ? "hover:text-bio" : "hover:text-amber"
                )}>
                  {faq.question}
                </AccordionTrigger>
                <AccordionContent className="text-muted-foreground pb-6">
                  {faq.answer}
                </AccordionContent>
              </AccordionItem>
            ))}
          </Accordion>
        </div>
      </div>
    </section>
  );
}
